<template>
    <div class="deliveries">
        <div class="deliveries__wrapper">
            <h2 class="deliveries__headline">Доставки</h2>
        </div>
        <div class="deliveries__body">
            <Delivery
                v-for="delivery of orderData.deliveries"
                :key="delivery.id"
                :delivery-data="delivery"
            />
        </div>
        <div class="deliveries__wrapper">
            <div class="deliveries__footer">
                <button
                    @click="duplicate"
                    class="deliveries__btn deliveries__btn_duplicate"
                >
                    <span>Дублировать заказ</span>
                    <svg
                        width="27"
                        height="25"
                        viewBox="0 0 27 25"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M15.0291 14.0273H11.4432V10.4778C11.4432 10.0257 11.0725 9.65869 10.6157 9.65869C10.1589 9.65869 9.78818 10.0257 9.78818 10.4778V14.0273H6.20226C5.74547 14.0273 5.37474 14.3943 5.37474 14.8464C5.37474 15.2997 5.74547 15.6656 6.20226 15.6656H9.78818V19.2151C9.78818 19.6683 10.1589 20.0342 10.6157 20.0342C11.0725 20.0342 11.4432 19.6683 11.4432 19.2151V15.6656H15.0291C15.4859 15.6656 15.8567 15.2997 15.8567 14.8464C15.8567 14.3943 15.4859 14.0273 15.0291 14.0273ZM18.2294 20.0342C18.2294 21.241 17.2408 22.2185 16.0227 22.2185H5.20972C3.99051 22.2185 3.003 21.241 3.003 20.0342V9.65873C3.003 8.45299 3.99051 7.47442 5.20972 7.47442H16.0227C17.2408 7.47442 18.2294 8.45299 18.2294 9.65873V20.0342ZM16.0227 5.29008H5.20971C2.77128 5.29008 0.796265 7.24613 0.796265 9.6587V20.0342C0.796265 22.4468 2.77128 24.4028 5.20971 24.4028H16.0227C18.46 24.4028 20.4361 22.4468 20.4361 20.0342V9.6587C20.4361 7.24613 18.46 5.29008 16.0227 5.29008ZM21.7873 0.102905H10.9743C8.72788 0.102905 6.8941 1.77062 6.61715 3.91996H8.84705C9.0953 2.98181 9.9493 2.2872 10.9743 2.2872H21.7873C23.0054 2.2872 23.994 3.26468 23.994 4.4715V14.8469C23.994 15.9762 23.1245 16.8947 22.0135 17.0083V19.1926C24.3426 19.0746 26.2007 17.183 26.2007 14.8469V4.4715C26.2007 2.05894 24.2246 0.102905 21.7873 0.102905Z"
                            fill="#AAAAAA"
                        />
                        <mask
                            id="mask0"
                            mask-type="alpha"
                            maskUnits="userSpaceOnUse"
                            x="0"
                            y="0"
                            width="27"
                            height="25"
                        >
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M15.0291 14.0273H11.4432V10.4778C11.4432 10.0257 11.0725 9.65869 10.6157 9.65869C10.1589 9.65869 9.78818 10.0257 9.78818 10.4778V14.0273H6.20226C5.74547 14.0273 5.37474 14.3943 5.37474 14.8464C5.37474 15.2997 5.74547 15.6656 6.20226 15.6656H9.78818V19.2151C9.78818 19.6683 10.1589 20.0342 10.6157 20.0342C11.0725 20.0342 11.4432 19.6683 11.4432 19.2151V15.6656H15.0291C15.4859 15.6656 15.8567 15.2997 15.8567 14.8464C15.8567 14.3943 15.4859 14.0273 15.0291 14.0273ZM18.2294 20.0342C18.2294 21.241 17.2408 22.2185 16.0227 22.2185H5.20972C3.99051 22.2185 3.003 21.241 3.003 20.0342V9.65873C3.003 8.45299 3.99051 7.47442 5.20972 7.47442H16.0227C17.2408 7.47442 18.2294 8.45299 18.2294 9.65873V20.0342ZM16.0227 5.29008H5.20971C2.77128 5.29008 0.796265 7.24613 0.796265 9.6587V20.0342C0.796265 22.4468 2.77128 24.4028 5.20971 24.4028H16.0227C18.46 24.4028 20.4361 22.4468 20.4361 20.0342V9.6587C20.4361 7.24613 18.46 5.29008 16.0227 5.29008ZM21.7873 0.102905H10.9743C8.72788 0.102905 6.8941 1.77062 6.61715 3.91996H8.84705C9.0953 2.98181 9.9493 2.2872 10.9743 2.2872H21.7873C23.0054 2.2872 23.994 3.26468 23.994 4.4715V14.8469C23.994 15.9762 23.1245 16.8947 22.0135 17.0083V19.1926C24.3426 19.0746 26.2007 17.183 26.2007 14.8469V4.4715C26.2007 2.05894 24.2246 0.102905 21.7873 0.102905Z"
                                fill="white"
                            />
                        </mask>
                        <g mask="url(#mask0)"></g>
                    </svg>
                </button>
                <button
                    @click="cancel"
                    class="deliveries__btn deliveries__btn_cancel"
                >
                    <span>Отменить заказ</span>
                    <svg
                        width="22"
                        height="29"
                        viewBox="0 0 22 29"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M17.5269 25.5084C17.4993 25.7669 17.4286 25.926 17.369 26.0165H5.07543C5.01689 25.9271 4.94619 25.7691 4.91748 25.5084C4.84789 24.8479 4.2415 11.0113 4.01617 5.79118H18.3421C18.1797 10.0238 17.6009 24.8203 17.5269 25.5084ZM8.17157 2.80999C8.17157 2.45431 8.53054 2.1638 8.97236 2.1638H13.47C13.9141 2.1638 14.273 2.45431 14.273 2.80999V3.45839H8.17157V2.80999ZM16.6577 3.44959V3.00778C16.6577 1.47359 15.4162 0.225464 13.8897 0.225464H8.55591C7.02944 0.225464 5.78793 1.47359 5.78793 3.00778V3.44959H0.453003V5.7912H1.68125L2.60023 26.2438C2.6179 26.33 3.05309 28.3601 4.82036 28.3601H17.6231C19.4401 28.3601 19.8521 26.2007 19.8576 26.1422C20.3137 21.0702 20.7213 5.7912 20.7213 5.7912H21.9915V3.44959H16.6577ZM16.1895 7.23927H14.0765L13.5087 24.6733H15.6228L16.1895 7.23927ZM10.1651 24.6727H12.278V7.23853H10.1651V24.6727ZM6.81963 24.6734H8.93482L8.37372 7.39729L8.36819 7.23934H6.2541L6.8141 24.5144L6.81963 24.6734Z"
                            fill="#AAAAAA"
                        />
                        <mask
                            id="mask0"
                            mask-type="alpha"
                            maskUnits="userSpaceOnUse"
                            x="0"
                            y="0"
                            width="22"
                            height="29"
                        >
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M17.5269 25.5084C17.4993 25.7669 17.4286 25.926 17.369 26.0165H5.07543C5.01689 25.9271 4.94619 25.7691 4.91748 25.5084C4.84789 24.8479 4.2415 11.0113 4.01617 5.79118H18.3421C18.1797 10.0238 17.6009 24.8203 17.5269 25.5084ZM8.17157 2.80999C8.17157 2.45431 8.53054 2.1638 8.97236 2.1638H13.47C13.9141 2.1638 14.273 2.45431 14.273 2.80999V3.45839H8.17157V2.80999ZM16.6577 3.44959V3.00778C16.6577 1.47359 15.4162 0.225464 13.8897 0.225464H8.55591C7.02944 0.225464 5.78793 1.47359 5.78793 3.00778V3.44959H0.453003V5.7912H1.68125L2.60023 26.2438C2.6179 26.33 3.05309 28.3601 4.82036 28.3601H17.6231C19.4401 28.3601 19.8521 26.2007 19.8576 26.1422C20.3137 21.0702 20.7213 5.7912 20.7213 5.7912H21.9915V3.44959H16.6577ZM16.1895 7.23927H14.0765L13.5087 24.6733H15.6228L16.1895 7.23927ZM10.1651 24.6727H12.278V7.23853H10.1651V24.6727ZM6.81963 24.6734H8.93482L8.37372 7.39729L8.36819 7.23934H6.2541L6.8141 24.5144L6.81963 24.6734Z"
                                fill="white"
                            />
                        </mask>
                        <g mask="url(#mask0)"></g>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</template>

<script>
import { mapActions } from "vuex";
import Delivery from "./delivery";
export default {
    name: "Deliveries",
    props: {
        orderData: {
            type: Object,
            default() {
                return true;
            },
        },
    },
    components: {
        Delivery,
    },
    methods: {
        ...mapActions(["cancelOrder", "duplicateOrder"]),
        cancel() {
            let newOrderState = { canceled: true };
            Object.assign(newOrderState, this.orderData);

            this.cancelOrder(newOrderState);
        },
        duplicate() {
            this.duplicateOrder(this.orderData.id);
        },
    },
};
</script>

<style lang="sass">
.deliveries
    &__headline
        @include fontCfg(17px, 1em, bold)
        margin: 2em 0
        color: #070707
    &__footer
        margin-top: 34px
    &__btn
        background: #F5F5F5
        @include dFlex(space-between, center)
        @include fontCfg(17px, 1.294em, normal, -0.0241em)
        color: #3f3f3f
        padding: 0.88em 1em
        width: 100%
        transition: background 0.2s ease-in
        &:hover
            background: #e0e0e0
        &_duplicate
            border-radius: 10px 10px 0 0
            border-bottom: 1px solid #D6D6D6
        &_cancel
            border-radius: 0 0 10px 10px
@media(min-width: 600px)
    .deliveries
        &__wrapper
            padding: 0 15px
@media (min-width: 768px)
    .deliveries
        &__headline
            font-size: 19px
</style>